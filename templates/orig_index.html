<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Analysis Dashboard</title>
    <script>
        function fetchAnalysis() {
            document.getElementById("result").innerHTML = "Fetching network data...";
            fetch("/analyze")
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    document.getElementById("result").innerHTML = `<p style='color:red;'>Error: ${data.error}</p>`;
                    return;
                }

                let output = "<h3>Network Analysis Report</h3>";

                output += "<h4>Metrics:</h4><ul>";
                for (const [key, value] of Object.entries(data.metrics)) {
                    output += `<li><strong>${key}:</strong> ${value}</li>`;
                }
                output += "</ul>";

                output += "<h4>Analysis:</h4><table border='1' cellpadding='5'>";
                output += "<tr><th>Metric</th><th>Analysis</th></tr>";
                data.analysis.forEach(item => {
                    output += `<tr><td>${item.Metric}</td><td>${item.Analysis}</td></tr>`;
                });
                output += "</table>";

                document.getElementById("result").innerHTML = output;
            })
            .catch(error => {
                document.getElementById("result").innerHTML = `<p style='color:red;'>Error fetching data.</p>`;
            });
        }
    </script>
</head>
<body>
    <h1>Network Monitoring & Analysis</h1>
    <button onclick="fetchAnalysis()">Run Analysis</button>
    <div id="result"></div>
</body>
</html>

